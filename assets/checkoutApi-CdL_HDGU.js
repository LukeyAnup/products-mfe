import{r as d,A as r}from"./responseHandler-DkRXjDjr.js";const n="http://localhost:4000/users",w=async s=>d(async()=>{const o=await fetch(`${n}/${s}`);if(!o.ok)throw new r("Failed to fetch checked out items");return{data:(await o.json()).orders||[],statusCode:200,message:"Checked out items fetched successfully"}}),y=async(s,o)=>d(async()=>{const a=await fetch(`${n}/${s}`);if(!a.ok)throw new r("Failed to fetch user data");const i=(await a.json()).orders||[],h=o.map(t=>({id:Date.now()+Math.random(),productId:t.productId,quantity:t.quantity,checkedOutAt:new Date().toISOString()})),e=[...i];h.forEach(t=>{const c=e.findIndex(p=>p.productId===t.productId);c!==-1?e[c]={...e[c],quantity:e[c].quantity+t.quantity,checkedOutAt:t.checkedOutAt}:e.push(t)});const u=await fetch(`${n}/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({orders:e,cart:[]})});if(!u.ok)throw new r("Checkout failed");return await u.json(),{data:{orderId:Date.now(),message:"Checkout successful"},statusCode:200,message:"Checkout successful"}});export{y as c,w as g};
